/*	ColorBox v1.3.7 - a full featured, light-weight, customizable lightbox based on jQuery 1.3 */
(function(c){function p(b,d){d=d==="x"?l.width():l.height();return typeof b==="string"?Math.round(b.match(/%/)?d/100*parseInt(b,10):parseInt(b,10)):b}function O(b){b=c.isFunction(b)?b.call(g):b;return a.photo||b.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function $(){for(var b in a)if(c.isFunction(a[b])&&b.substring(0,2)!=="on")a[b]=a[b].call(g);a.rel=a.rel||g.rel||"nofollow";a.href=a.href||c(g).attr("href");a.title=a.title||g.title}function aa(b){g=b;a=c.extend({},c(g).data(u)); $();if(a.rel!=="nofollow"){i=c(".cboxElement").filter(function(){return(c(this).data(u).rel||this.rel)===a.rel});h=i.index(g);if(h<0){i=i.add(g);h=i.length-1}}else{i=c(g);h=0}if(!q){z=q=m;P=g;P.blur();c.event.trigger(ca);a.onOpen&&a.onOpen.call(g);r.css({opacity:a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();a.w=p(a.initialWidth,"x");a.h=p(a.initialHeight,"y");e.position(0);Q&&l.bind("resize.cboxIE6 scroll.cboxIE6",function(){r.css({width:l.width(),height:l.height(),top:l.scrollTop(),left:l.scrollLeft()})}).trigger("scroll.cboxIE6")}R.add(G).add(H).add(s).add(S).hide(); T.html(a.close).show();e.slideshow();e.load()}var u="colorbox",I="hover",m=true,e,A=c.browser.msie&&!c.support.opacity,Q=A&&c.browser.version<7,ca="cbox_open",K="cbox_load",U="cbox_complete",r,j,v,o,V,W,X,Y,i,l,n,L,M,N,S,R,s,H,G,T,B,C,w,x,g,P,h,a,q,z,ba={transition:"elastic",speed:350,width:false,height:false,innerWidth:false,innerHeight:false,initialWidth:"400",initialHeight:"400",maxWidth:false,maxHeight:false,scalePhotos:m,scrolling:m,inline:false,html:false,iframe:false,photo:false,href:false, title:false,rel:false,opacity:0.9,preloading:m,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,overlayClose:m,loop:false,slideshow:false,slideshowAuto:m,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,escKey:m,arrowKey:m};e=c.fn.colorbox=c.colorbox=function(b,d){var f=this;b||(b={});if(d)b.onComplete=d;if(!f.selector||f.selector===""){f=c("<a/>"); b.open=m}f.each(function(){c(this).data(u,c.extend({},c(this).data(u)||ba,b)).addClass("cboxElement")});b.open&&aa(f[0]);return f};e.init=function(){function b(d){return c('<div id="cbox'+d+'"/>')}l=c(window);j=c('<div id="colorbox"/>');r=b("Overlay").hide();v=b("Wrapper");o=b("Content").append(n=b("LoadedContent").css({width:0,height:0}),M=b("LoadingOverlay"),N=b("LoadingGraphic"),S=b("Title"),R=b("Current"),s=b("Slideshow"),H=b("Next"),G=b("Previous"),T=b("Close"));v.append(c("<div/>").append(b("TopLeft"), V=b("TopCenter"),b("TopRight")),c("<div/>").append(W=b("MiddleLeft"),o,X=b("MiddleRight")),c("<div/>").append(b("BottomLeft"),Y=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"});L=c("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>");c("body").prepend(r,j.append(v,L));if(A){j.addClass("cboxIE");Q&&r.css("position","absolute")}o.children().bind("mouseover mouseout",function(){c(this).toggleClass(I)}).addClass(I);B=V.height()+Y.height()+o.outerHeight(m)- o.height();C=W.width()+X.width()+o.outerWidth(m)-o.width();w=n.outerHeight(m);x=n.outerWidth(m);j.css({"padding-bottom":B,"padding-right":C}).hide();H.click(e.next);G.click(e.prev);T.click(e.close);o.children().removeClass(I);c(".cboxElement").live("click",function(d){if(d.button!==0&&typeof d.button!=="undefined"||d.ctrlKey||d.shiftKey||d.altKey)return m;else{aa(this);return false}});r.click(function(){a.overlayClose&&e.close()});c(document).bind("keydown",function(d){if(q&&a.escKey&&d.keyCode=== 27){d.preventDefault();e.close()}if(q&&a.arrowKey&&!z&&i.length>1)if(d.keyCode===37){d.preventDefault();G.click()}else if(d.keyCode===39){d.preventDefault();H.click()}})};e.position=function(b,d){function f(y){V[0].style.width=Y[0].style.width=o[0].style.width=y.style.width;N[0].style.height=M[0].style.height=o[0].style.height=W[0].style.height=X[0].style.height=y.style.height}var k=Math.max(l.height()-a.h-w-B,0)/2+l.scrollTop(),t=Math.max(l.width()-a.w-x-C,0)/2+l.scrollLeft();b=j.width()===a.w+x&& j.height()===a.h+w?0:b;v[0].style.width=v[0].style.height="9999px";j.dequeue().animate({width:a.w+x,height:a.h+w,top:k,left:t},{duration:b,complete:function(){f(this);z=false;v[0].style.width=a.w+x+C+"px";v[0].style.height=a.h+w+B+"px";d&&d()},step:function(){f(this)}})};e.resize=function(b){function d(){a.w=a.w||n.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}function f(){a.h=a.h||n.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}function k(J){e.position(J,function(){if(q){if(A){t&&n.fadeIn(100); j[0].style.removeAttribute("filter")}if(a.iframe)n.append("<iframe id='cboxIframe'"+(a.scrolling?" ":"scrolling='no'")+" name='iframe_"+(new Date).getTime()+"' frameborder=0 src='"+a.href+"' "+(A?"allowtransparency='true'":"")+" />");n.show();S.show().html(a.title);(function(){var D,E,F=i.length,Z=a.loop;if(F>1){R.html(a.current.replace(/\{current\}/,h+1).replace(/\{total\}/,F)).show();H[Z||h<F-1?"show":"hide"]().html(a.next);G[Z||h>0?"show":"hide"]().html(a.prev);D=h>0?i[h-1]:i[F-1];E=h<F-1?i[h+ 1]:i[0];if(a.slideshow){s.show();h==F-1&&!Z&&j.is(".cboxSlideshow_on")&&s.click()}if(a.preloading){E=c(E).data(u).href||E.href;D=c(D).data(u).href||D.href;if(O(E))c("<img />")[0].src=E;if(O(D))c("<img />")[0].src=D}}})();M.hide();N.hide();a.transition==="fade"&&j.fadeTo(y,1,function(){A&&j[0].style.removeAttribute("filter")});l.bind("resize.cbox",function(){e.position(0)});c.event.trigger(U);a.onComplete&&a.onComplete.call(g)}})}if(q){var t,y=a.transition==="none"?0:a.speed;l.unbind("resize.cbox"); if(b){n.remove();n=c('<div id="cboxLoadedContent"/>').html(b);n.hide().appendTo(L).css({width:d(),overflow:a.scrolling?"auto":"hidden"}).css({height:f()}).prependTo(o);c("#cboxPhoto").css({cssFloat:"none"});Q&&c("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("cbox_cleanup",function(){this.style.visibility="inherit"});a.transition==="fade"&&j.fadeTo(y,0,function(){k(0)})||k(y)}else setTimeout(function(){var J=n.wrapInner("<div style='overflow:auto'></div>").children(); a.h=J.height();n.css({height:a.h});J.replaceWith(J.children());e.position(y)},1)}};e.load=function(){var b,d,f,k=e.resize;z=m;g=i[h];a=c.extend({},c(g).data(u));$();c.event.trigger(K);a.onLoad&&a.onLoad.call(g);a.h=a.height?p(a.height,"y")-w-B:a.innerHeight?p(a.innerHeight,"y"):false;a.w=a.width?p(a.width,"x")-x-C:a.innerWidth?p(a.innerWidth,"x"):false;a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=p(a.maxWidth,"x")-x-C;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=p(a.maxHeight,"y")-w-B;a.mh=a.h&&a.h< a.mh?a.h:a.mh}b=a.href;M.show();N.show();if(a.inline){c('<div id="cboxInlineTemp" />').hide().insertBefore(c(b)[0]).bind(K+" cbox_cleanup",function(){c(this).replaceWith(n.children())});k(c(b))}else if(a.iframe)k(" ");else if(a.html)k(a.html);else if(O(b)){d=new Image;d.onload=function(){var t;d.onload=null;d.id="cboxPhoto";c(d).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(a.scalePhotos){f=function(){d.height-=d.height*t;d.width-=d.width*t};if(a.mw&&d.width>a.mw){t=(d.width- a.mw)/d.width;f()}if(a.mh&&d.height>a.mh){t=(d.height-a.mh)/d.height;f()}}if(a.h)d.style.marginTop=Math.max(a.h-d.height,0)/2+"px";k(d);i.length>1&&c(d).css({cursor:"pointer"}).click(e.next);if(A)d.style.msInterpolationMode="bicubic"};d.src=b}else c("<div><p>Request unsuccessful.</p></div>").appendTo(L).load(b,function(){k(this)})};e.next=function(){if(!z){h=h<i.length-1?h+1:0;e.load()}};e.prev=function(){if(!z){h=h>0?h-1:i.length-1;e.load()}};e.slideshow=function(){function b(){s.text(a.slideshowStop).bind(U, function(){f=setTimeout(e.next,a.slideshowSpeed)}).bind(K,function(){clearTimeout(f)}).one("click",function(){d();c(this).removeClass(I)});j.removeClass(k+"off").addClass(k+"on")}var d,f,k="cboxSlideshow_";s.bind("cbox_closed",function(){s.unbind();clearTimeout(f);j.removeClass(k+"off "+k+"on")});d=function(){clearTimeout(f);s.text(a.slideshowStart).unbind(U+" "+K).one("click",function(){b();f=setTimeout(e.next,a.slideshowSpeed);c(this).removeClass(I)});j.removeClass(k+"on").addClass(k+"off")};if(a.slideshow&& i.length>1)a.slideshowAuto?b():d()};e.close=function(){if(q){q=false;c.event.trigger("cbox_cleanup");a.onCleanup&&a.onCleanup.call(g);l.unbind(".cbox .cboxIE6");j.add(r).stop().fadeTo("fast",0,function(){c("#colorbox iframe").attr("src","about:blank");n.remove();j.add(r).css({opacity:1,cursor:"auto"}).hide();try{P.focus()}catch(b){}setTimeout(function(){c.event.trigger("cbox_closed");a.onClosed&&a.onClosed.call(g)},1)})}};e.element=function(){return c(g)};e.settings=ba;c(e.init)})(jQuery);