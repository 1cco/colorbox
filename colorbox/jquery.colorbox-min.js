/*	ColorBox v1.3.7.dev - a full featured, light-weight, customizable lightbox based on jQuery 1.3 */
(function(d,da,m,g,t,J){function p(b,c){c=c==="x"?o.width():o.height();return typeof b==="string"?Math.round(b.match(/%/)?c/100*parseInt(b,10):parseInt(b,10)):b}function M(b){b=d.isFunction(b)?b.call(i):b;return a.photo||b.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function $(){for(var b in a)if(d.isFunction(a[b])&&b.substring(0,2)!=="on")a[b]=a[b].call(i);a.rel=a.rel||i.rel||"nofollow";a.href=a.href||d(i).attr("href");a.title=a.title||i.title}function aa(b){i=b;a=d.extend({},d(i).data(t)); $();if(a.rel!=="nofollow"){k=d(".cboxElement").filter(function(){return(d(this).data(t).rel||this.rel)===a.rel});h=k.index(i);if(h<0){k=k.add(i);h=k.length-1}}else{k=d(i);h=0}if(!r){r=B=m;N=i;try{N.blur()}catch(c){}d.event.trigger(ea);a.onOpen&&a.onOpen.call(i);s.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();a.w=p(a.initialWidth,"x");a.h=p(a.initialHeight,"y");e.position(0);O&&o.bind("resize.cboxIE6 scroll.cboxIE6",function(){s.css({width:o.width(),height:o.height(),top:o.scrollTop(), left:o.scrollLeft()})}).trigger("scroll.cboxIE6")}P.add(F).add(G).add(u).add(Q).hide();R.html(a.close).show();e.slideshow();e.load()}var e,C=d.browser.msie&&!d.support.opacity,O=C&&d.browser.version<7,ea="cbox_open",K="cbox_load",S="cbox_complete",s,l,y,q,T,U,V,W,k,o,n,L,H,Q,P,u,G,F,R,z,A,v,w,i,N,h,a,r,B,ba={transition:"elastic",speed:350,width:g,height:g,innerWidth:g,innerHeight:g,initialWidth:"400",initialHeight:"400",maxWidth:g,maxHeight:g,scalePhotos:m,scrolling:m,inline:g,html:g,iframe:g,photo:g, href:g,title:g,rel:g,opacity:0.9,preloading:m,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:g,overlayClose:m,loop:m,slideshow:g,slideshowAuto:m,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:g,onLoad:g,onComplete:g,onCleanup:g,onClosed:g,escKey:m,arrowKey:m};e=d.fn.colorbox=d.colorbox=function(b,c){var f=this;if(f.selector&&!f[0])return f;b=b||{};if(c)b.onComplete=c;if(!f.length||f.selector===undefined){f=d("<a/>"); b.open=m}f.each(function(){d(this).data(t,d.extend({},d(this).data(t)||ba,b)).addClass("cboxElement")});b.open&&aa(f[0]);return f};e.init=function(){function b(c){return d('<div id="cbox'+c+'"/>')}o=d(da);l=d('<div id="colorbox"/>');s=b("Overlay").hide();y=b("Wrapper");q=b("Content").append(n=b("LoadedContent").css({width:0,height:0}),H=b("LoadingOverlay").add(b("LoadingGraphic")),Q=b("Title"),P=b("Current"),G=b("Next"),F=b("Previous"),u=b("Slideshow"),R=b("Close"));y.append(d("<div/>").append(b("TopLeft"), T=b("TopCenter"),b("TopRight")),d("<div/>").append(U=b("MiddleLeft"),q,V=b("MiddleRight")),d("<div/>").append(b("BottomLeft"),W=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"});L=d("<div style='position:absolute; width:9999px; visibility:hidden;'/>");d("body").prepend(s,l.append(y,L));if(C){l.addClass("cboxIE");O&&s.css("position","absolute")}q.children().hover(function(){d(this).addClass(J)},function(){d(this).removeClass(J)}).addClass(J);z=T.height()+W.height()+q.outerHeight(m)- q.height();A=U.width()+V.width()+q.outerWidth(m)-q.width();v=n.outerHeight(m);w=n.outerWidth(m);l.css({"padding-bottom":z,"padding-right":A}).hide();G.click(e.next);F.click(e.prev);R.click(e.close);q.children().removeClass(J);d(".cboxElement").live("click",function(c){if(c.button!==0&&typeof c.button!=="undefined"||c.ctrlKey||c.shiftKey||c.altKey)return m;else{aa(this);return g}});s.click(function(){return a.overlayClose&&e.close()});d(document).bind("keydown",function(c){if(r&&a.escKey&&c.keyCode=== 27){c.preventDefault();e.close()}if(r&&a.arrowKey&&!B&&k.length>1)if(c.keyCode===37&&(h>0||a.loop)){c.preventDefault();F.click()}else if(c.keyCode===39&&(h<k.length-1||a.loop)){c.preventDefault();G.click()}})};e.remove=function(){l.add(s).remove();d(".cboxElement").removeData(t).removeClass("cboxElement").die("click")};e.position=function(b,c){function f(D){T[0].style.width=W[0].style.width=q[0].style.width=D.style.width;H[0].style.height=H[1].style.height=q[0].style.height=U[0].style.height=V[0].style.height= D.style.height}var j,x=Math.max(o.height()-a.h-v-z,0)/2+o.scrollTop(),I=Math.max(o.width()-a.w-w-A,0)/2+o.scrollLeft();j=l.width()===a.w+w&&l.height()===a.h+v?0:b;y[0].style.width=y[0].style.height="9999px";l.dequeue().animate({width:a.w+w,height:a.h+v,top:x,left:I},{duration:j,complete:function(){f(this);B=g;y[0].style.width=a.w+w+A+"px";y[0].style.height=a.h+v+z+"px";c&&c()},step:function(){f(this)}})};e.resize=function(b){if(r){b=b||{};if(b.width)a.w=p(b.width,"x")-w-A;if(b.innerWidth)a.w=p(b.innerWidth, "x");n.css({width:a.w});if(b.height)a.h=p(b.height,"y")-v-z;if(b.innerHeight)a.h=p(b.innerHeight,"y");if(!b.innerHeight&&!b.height){b=n.wrapInner("<div style='overflow:auto'></div>").children();a.h=b.height();b.replaceWith(b.children())}n.css({height:a.h});e.position(a.transition==="none"?0:a.speed)}};e.prep=function(b){function c(x){var I,D,X,Y,E=k.length,Z=a.loop;e.position(x,function(){function ca(){C&&l[0].style.removeAttribute("filter")}if(r){C&&f&&n.fadeIn(100);if(a.iframe)d("<iframe frameborder=0"+ (a.scrolling?"":" scrolling='no'")+(C?" allowtransparency='true'":"")+"/>").appendTo(n).attr({src:a.href,id:"cboxIframe",name:(new Date).getTime()});n.show();Q.show().html(a.title);if(E>1){P.html(a.current.replace(/\{current\}/,h+1).replace(/\{total\}/,E)).show();G[Z||h<E-1?"show":"hide"]().html(a.next);F[Z||h>0?"show":"hide"]().html(a.previous);I=h>0?k[h-1]:k[E-1];X=h<E-1?k[h+1]:k[0];if(a.slideshow){u.show();h===E-1&&!Z&&l.is(".cboxSlideshow_on")&&u.click()}if(a.preloading){Y=d(X).data(t).href|| X.href;D=d(I).data(t).href||I.href;if(M(Y))d("<img/>")[0].src=Y;if(M(D))d("<img/>")[0].src=D}}H.hide();a.transition==="fade"?l.fadeTo(j,1,function(){ca()}):ca();o.bind("resize.cbox",function(){e.position(0)});d.event.trigger(S);a.onComplete&&a.onComplete.call(i)}})}if(r){var f,j=a.transition==="none"?0:a.speed;o.unbind("resize.cbox");n.remove();n=d('<div id="cboxLoadedContent"/>').html(b);n.hide().appendTo(L).css({width:function(){a.w=a.w||n.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}(),overflow:a.scrolling? "auto":"hidden"}).css({height:function(){a.h=a.h||n.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}()}).prependTo(q);d("#cboxPhoto").css({cssFloat:"none"});O&&d("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("cbox_cleanup",function(){this.style.visibility="inherit"});a.transition==="fade"?l.fadeTo(j,0,function(){c(0)}):c(j)}};e.load=function(){var b,c,f,j=e.prep;B=m;i=k[h];a=d.extend({},d(i).data(t));$();d.event.trigger(K); a.onLoad&&a.onLoad.call(i);a.h=a.height?p(a.height,"y")-v-z:a.innerHeight&&p(a.innerHeight,"y");a.w=a.width?p(a.width,"x")-w-A:a.innerWidth&&p(a.innerWidth,"x");a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=p(a.maxWidth,"x")-w-A;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=p(a.maxHeight,"y")-v-z;a.mh=a.h&&a.h<a.mh?a.h:a.mh}b=a.href;H.show();if(a.inline){d('<div id="cboxInlineTemp"/>').hide().insertBefore(d(b)[0]).bind(K+" cbox_cleanup",function(){d(this).replaceWith(n.children())});j(d(b))}else if(a.iframe)j(" "); else if(a.html)j(a.html);else if(M(b)){c=new Image;c.onload=function(){var x;c.onload=null;c.id="cboxPhoto";d(c).css({margin:"auto",border:"none",display:"block",cssFloat:"left",height:c.height,width:c.width});if(a.scalePhotos){f=function(){c.height-=c.height*x;c.width-=c.width*x};if(a.mw&&c.width>a.mw){x=(c.width-a.mw)/c.width;f()}if(a.mh&&c.height>a.mh){x=(c.height-a.mh)/c.height;f()}}if(a.h)c.style.marginTop=Math.max(a.h-c.height,0)/2+"px";j(c);k.length>1&&d(c).css({cursor:"pointer"}).click(e.next); if(C)c.style.msInterpolationMode="bicubic"};c.src=b}else d("<div>Request unsuccessful.</div>").appendTo(L).load(b,function(){j(this)})};e.next=function(){if(!B){h=h<k.length-1?h+1:0;e.load()}};e.prev=function(){if(!B){h=h>0?h-1:k.length-1;e.load()}};e.slideshow=function(){function b(){u.text(a.slideshowStop).bind(S,function(){f=setTimeout(e.next,a.slideshowSpeed)}).bind(K,function(){clearTimeout(f)}).one("click",function(){c()});l.removeClass(j+"off").addClass(j+"on")}var c,f,j="cboxSlideshow_";u.bind("cbox_closed", function(){u.unbind();clearTimeout(f);l.removeClass(j+"off "+j+"on")});c=function(){clearTimeout(f);u.text(a.slideshowStart).unbind(S+" "+K).one("click",function(){b();f=setTimeout(e.next,a.slideshowSpeed)});l.removeClass(j+"on").addClass(j+"off")};if(a.slideshow&&k.length>1)a.slideshowAuto?b():c()};e.close=function(){if(r){r=g;d.event.trigger("cbox_cleanup");a.onCleanup&&a.onCleanup.call(i);o.unbind(".cbox .cboxIE6");l.add(s).stop().fadeTo("fast",0,function(){d("#colorbox iframe").attr("src","about:blank"); n.remove();l.add(s).css({opacity:1,cursor:"auto"}).hide();try{N.focus()}catch(b){}setTimeout(function(){d.event.trigger("cbox_closed");a.onClosed&&a.onClosed.call(i)},1)})}};e.element=function(){return d(i)};e.settings=ba;d(e.init)})(jQuery,this,true,false,"colorbox","hover");
