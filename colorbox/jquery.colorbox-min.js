/*	ColorBox v1.3.7.dev - a full featured, light-weight, customizable lightbox based on jQuery 1.3 */
(function(c,da,m,f,t,J){function p(b,d){d=d==="x"?o.width():o.height();return typeof b==="string"?Math.round(b.match(/%/)?d/100*parseInt(b,10):parseInt(b,10)):b}function M(b){b=c.isFunction(b)?b.call(i):b;return a.photo||b.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function $(){for(var b in a)if(c.isFunction(a[b])&&b.substring(0,2)!=="on")a[b]=a[b].call(i);a.rel=a.rel||i.rel||"nofollow";a.href=a.href||c(i).attr("href");a.title=a.title||i.title}function aa(b){i=b;a=c.extend({},c(i).data(t)); $();if(a.rel!=="nofollow"){k=c(".cboxElement").filter(function(){return(c(this).data(t).rel||this.rel)===a.rel});h=k.index(i);if(h<0){k=k.add(i);h=k.length-1}}else{k=c(i);h=0}if(!r){B=r=m;N=i;try{N.blur()}catch(d){}c.event.trigger(ea);a.onOpen&&a.onOpen.call(i);s.css({opacity:parseFloat(a.opacity),cursor:a.overlayClose?"pointer":"auto"}).show();a.w=p(a.initialWidth,"x");a.h=p(a.initialHeight,"y");e.position(0);O&&o.bind("resize.cboxIE6 scroll.cboxIE6",function(){s.css({width:o.width(),height:o.height(), top:o.scrollTop(),left:o.scrollLeft()})}).trigger("scroll.cboxIE6")}P.add(F).add(G).add(u).add(Q).hide();R.html(a.close).show();e.slideshow();e.load()}var e,C=c.browser.msie&&!c.support.opacity,O=C&&c.browser.version<7,ea="cbox_open",K="cbox_load",S="cbox_complete",s,l,y,q,T,U,V,W,k,o,n,L,H,Q,P,u,G,F,R,z,A,v,w,i,N,h,a,r,B,ba={transition:"elastic",speed:350,width:f,height:f,innerWidth:f,innerHeight:f,initialWidth:"400",initialHeight:"400",maxWidth:f,maxHeight:f,scalePhotos:m,scrolling:m,inline:f,html:f, iframe:f,photo:f,href:f,title:f,rel:f,opacity:0.9,preloading:m,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:f,overlayClose:m,loop:m,slideshow:f,slideshowAuto:m,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:f,onLoad:f,onComplete:f,onCleanup:f,onClosed:f,escKey:m,arrowKey:m};e=c.fn.colorbox=c.colorbox=function(b,d){var g=this;if(g.selector&&!g.length)return g;b=b||{};if(d)b.onComplete=d;if(!g.length||g.selector=== undefined){g=c("<a/>");b.open=m}g.each(function(){c(this).data(t,c.extend({},c(this).data(t)||ba,b)).addClass("cboxElement")});b.open&&aa(g[0]);return g};e.init=function(){function b(d){return c('<div id="cbox'+d+'"/>')}o=c(da);l=c('<div id="colorbox"/>');s=b("Overlay").hide();y=b("Wrapper");q=b("Content").append(n=b("LoadedContent").css({width:0,height:0}),H=b("LoadingOverlay").add(b("LoadingGraphic")),Q=b("Title"),P=b("Current"),G=b("Next"),F=b("Previous"),u=b("Slideshow"),R=b("Close"));y.append(c("<div/>").append(b("TopLeft"), T=b("TopCenter"),b("TopRight")),c("<div/>").append(U=b("MiddleLeft"),q,V=b("MiddleRight")),c("<div/>").append(b("BottomLeft"),W=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"});L=c("<div style='position:absolute; width:9999px;'/>");c("body").prepend(s,l.append(y,L));if(C){l.addClass("cboxIE");O&&s.css("position","absolute")}q.children().hover(function(){c(this).addClass(J)},function(){c(this).removeClass(J)}).addClass(J);z=T.height()+W.height()+q.outerHeight(m)-q.height(); A=U.width()+V.width()+q.outerWidth(m)-q.width();v=n.outerHeight(m);w=n.outerWidth(m);l.css({"padding-bottom":z,"padding-right":A}).hide();G.click(e.next);F.click(e.prev);R.click(e.close);q.children().removeClass(J);c(".cboxElement").live("click",function(d){if(d.button!==0&&typeof d.button!=="undefined"||d.ctrlKey||d.shiftKey||d.altKey)return m;else{aa(this);return f}});s.click(function(){a.overlayClose&&e.close()});c(document).bind("keydown",function(d){if(r&&a.escKey&&d.keyCode===27){d.preventDefault(); e.close()}if(r&&a.arrowKey&&!B&&k.length>1)if(d.keyCode===37&&(h>0||a.loop)){d.preventDefault();F.click()}else if(d.keyCode===39&&(h<k.length-1||a.loop)){d.preventDefault();G.click()}})};e.remove=function(){l.add(s).remove();c(".cboxElement").removeData(t).removeClass("cboxElement")};e.position=function(b,d){function g(D){T[0].style.width=W[0].style.width=q[0].style.width=D.style.width;H[0].style.height=H[1].style.height=q[0].style.height=U[0].style.height=V[0].style.height=D.style.height}var j,x= Math.max(o.height()-a.h-v-z,0)/2+o.scrollTop(),I=Math.max(o.width()-a.w-w-A,0)/2+o.scrollLeft();j=l.width()===a.w+w&&l.height()===a.h+v?0:b;y[0].style.width=y[0].style.height="9999px";l.dequeue().animate({width:a.w+w,height:a.h+v,top:x,left:I},{duration:j,complete:function(){g(this);B=f;y[0].style.width=a.w+w+A+"px";y[0].style.height=a.h+v+z+"px";d&&d()},step:function(){g(this)}})};e.resize=function(b){if(r){b=b||{};if(b.width)a.w=p(b.width,"x")-w-A;if(b.innerWidth)a.w=p(b.innerWidth,"x");n.css({width:a.w}); if(b.height)a.h=p(b.height,"y")-v-z;if(b.innerHeight)a.h=p(b.innerHeight,"y");if(!b.innerHeight&&!b.height){b=n.wrapInner("<div style='overflow:auto'></div>").children();a.h=b.height();b.replaceWith(b.children())}n.css({height:a.h});e.position(a.transition==="none"?0:a.speed)}};e.prep=function(b){function d(x){var I,D,X,Y,E=k.length,Z=a.loop;e.position(x,function(){function ca(){C&&l[0].style.removeAttribute("filter")}if(r){C&&g&&n.fadeIn(100);if(a.iframe)c("<iframe frameborder=0"+(a.scrolling?"": " scrolling='no'")+(C?" allowtransparency='true'":"")+"/>").appendTo(n).attr({src:a.href,id:"cboxIframe",name:(new Date).getTime()});n.show();Q.show().html(a.title);if(E>1){P.html(a.current.replace(/\{current\}/,h+1).replace(/\{total\}/,E)).show();G[Z||h<E-1?"show":"hide"]().html(a.next);F[Z||h>0?"show":"hide"]().html(a.previous);I=h>0?k[h-1]:k[E-1];X=h<E-1?k[h+1]:k[0];if(a.slideshow){u.show();h===E-1&&!Z&&l.is(".cboxSlideshow_on")&&u.click()}if(a.preloading){Y=c(X).data(t).href||X.href;D=c(I).data(t).href|| I.href;if(M(Y))c("<img/>")[0].src=Y;if(M(D))c("<img/>")[0].src=D}}H.hide();a.transition==="fade"?l.fadeTo(j,1,function(){ca()}):ca();o.bind("resize.cbox",function(){e.position(0)});c.event.trigger(S);a.onComplete&&a.onComplete.call(i)}})}if(r){var g,j=a.transition==="none"?0:a.speed;o.unbind("resize.cbox");n.remove();n=c('<div id="cboxLoadedContent"/>').html(b);n.hide().appendTo(L).css({width:function(){a.w=a.w||n.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}(),overflow:a.scrolling?"auto":"hidden"}).css({height:function(){a.h= a.h||n.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}()}).prependTo(q);c("#cboxPhoto").css({cssFloat:"none"});O&&c("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("cbox_cleanup",function(){this.style.visibility="inherit"});a.transition==="fade"?l.fadeTo(j,0,function(){d(0)}):d(j)}};e.load=function(){var b,d,g,j=e.prep;B=m;i=k[h];a=c.extend({},c(i).data(t));$();c.event.trigger(K);a.onLoad&&a.onLoad.call(i);a.h=a.height?p(a.height, "y")-v-z:a.innerHeight?p(a.innerHeight,"y"):f;a.w=a.width?p(a.width,"x")-w-A:a.innerWidth?p(a.innerWidth,"x"):f;a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=p(a.maxWidth,"x")-w-A;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=p(a.maxHeight,"y")-v-z;a.mh=a.h&&a.h<a.mh?a.h:a.mh}b=a.href;H.show();if(a.inline){c('<div id="cboxInlineTemp"/>').hide().insertBefore(c(b)[0]).bind(K+" cbox_cleanup",function(){c(this).replaceWith(n.children())});j(c(b))}else if(a.iframe)j(" ");else if(a.html)j(a.html);else if(M(b)){d= new Image;d.onload=function(){var x;d.onload=null;d.id="cboxPhoto";c(d).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(a.scalePhotos){g=function(){d.height-=d.height*x;d.width-=d.width*x};if(a.mw&&d.width>a.mw){x=(d.width-a.mw)/d.width;g()}if(a.mh&&d.height>a.mh){x=(d.height-a.mh)/d.height;g()}}if(a.h)d.style.marginTop=Math.max(a.h-d.height,0)/2+"px";j(d);k.length>1&&c(d).css({cursor:"pointer"}).click(e.next);if(C)d.style.msInterpolationMode="bicubic"};d.src=b}else c("<div>Request unsuccessful.</div>").appendTo(L).load(b, function(){j(this)})};e.next=function(){if(!B){h=h<k.length-1?h+1:0;e.load()}};e.prev=function(){if(!B){h=h>0?h-1:k.length-1;e.load()}};e.slideshow=function(){function b(){u.text(a.slideshowStop).bind(S,function(){g=setTimeout(e.next,a.slideshowSpeed)}).bind(K,function(){clearTimeout(g)}).one("click",function(){d()});l.removeClass(j+"off").addClass(j+"on")}var d,g,j="cboxSlideshow_";u.bind("cbox_closed",function(){u.unbind();clearTimeout(g);l.removeClass(j+"off "+j+"on")});d=function(){clearTimeout(g); u.text(a.slideshowStart).unbind(S+" "+K).one("click",function(){b();g=setTimeout(e.next,a.slideshowSpeed)});l.removeClass(j+"on").addClass(j+"off")};if(a.slideshow&&k.length>1)a.slideshowAuto?b():d()};e.close=function(){if(r){r=f;c.event.trigger("cbox_cleanup");a.onCleanup&&a.onCleanup.call(i);o.unbind(".cbox .cboxIE6");l.add(s).stop().fadeTo("fast",0,function(){c("#colorbox iframe").attr("src","about:blank");n.remove();l.add(s).css({opacity:1,cursor:"auto"}).hide();try{N.focus()}catch(b){}setTimeout(function(){c.event.trigger("cbox_closed"); a.onClosed&&a.onClosed.call(i)},1)})}};e.element=function(){return c(i)};e.settings=ba;c(e.init)})(jQuery,this,true,false,"colorbox","hover");
